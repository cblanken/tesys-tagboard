{% load component_tags static %}

<div data-post_id="{{ post.pk }}"
     {% if post.favorited %}data-favorite{% endif %}
     class="relative skeleton post-thumbnail group/post w-[calc(100svw - 14px)] max-h-svh md:w-75 md:h-75 md:max-w-75 md:max-h-75">
  <a class="absolute w-full h-full z-1"
     href="{% url "post" post_id=post.pk %}"></a>
  <img class="object-cover invisible w-full h-full rounded-md"
       loading="lazy"
       {% if post.media.image.thumbnail %} src="{{ post.media.image.thumbnail.url }}" width="{{ post.media.image.thumbnail.width }}" height="{{ post.media.image.thumbnail.height }}" {% else %} src="{% static "images/default_thumbnail.png" %}" width="400px" height="400px" {% endif %}
       alt="image" />
  <div class="flex hidden absolute top-0 flex-col justify-between p-2 w-full h-full rounded-md post-thumbnail-hover group-hover/post:flex">
    <section class="flex gap-1 self-end z-5">
      {% if request.user.is_authenticated %}
        {% component "favorite_toggle" post=post / %}
        {% component "collection_picker" post=post / %}
      {% endif %}
    </section>
    <section class="flex flex-wrap gap-1 text-sm z-5">
      {% for tag in tags %}
        {% component "tag" tag=tag size="small" / %}
      {% endfor %}
    </section>
  </div>
</div>
